{% if projects and projects|length > 0 %}
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
  {% for p in projects %}
  {% if p.project_type == 'modpack' %}
    {% set href = '/modpacks/' ~ (p.slug or p.project_id) %}
    {% set target = '_self' %}
    {% set rel = '' %}
  {% else %}
    {% set href = 'https://modrinth.com/' ~ p.project_type ~ '/' ~ (p.slug or p.project_id) %}
    {% set target = '_blank' %}
    {% set rel = 'noreferrer noopener' %}
  {% endif %}
  <a href="{{ href }}" target="{{ target }}" rel="{{ rel }}" class="block group">
    <div class="bg-slate-800 border border-slate-700 rounded-lg overflow-hidden group-hover:border-slate-600 transition-colors">
      <div class="flex items-center gap-3 p-4">
        <img src="{{ p.icon_url or '/static/placeholder.svg' }}" alt="icon" class="w-10 h-10 rounded"/>
        <div>
          <div class="font-medium">{{ p.title }}</div>
          <div class="text-xs text-slate-400">{{ p.project_type|capitalize }} â€¢ {{ p.downloads }} downloads</div>
        </div>
      </div>
      <div class="px-4 pb-4 text-sm text-slate-300 line-clamp-3">{{ p.description }}</div>
    </div>
  </a>
  {% endfor %}
</div>
{% else %}
  {% if query %}
  <div class="text-slate-400">No results for "{{ query }}"</div>
  {% else %}
  <div class="text-slate-400">Start typing to search.</div>
  {% endif %}
{% endif %}
